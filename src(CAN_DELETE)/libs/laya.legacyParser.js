!function(e,t){"use strict";t.Animator&&(t.Animator.prototype._parse=function(e){for(var a=e.playOnWake,r=e.layers,n=0;n<r.length;n++){var i=r[n],o=new t.AnimatorControllerLayer(i.name);o.defaultWeight=0===n?1:i.weight;var s=i.blendingMode;s&&(o.blendingMode=s),this.addControllerLayer(o);for(var l=i.states,c=0,d=l.length;c<d;c++){var p=l[c],h=p.clipPath;if(h){var m,u=p.name;if(m=t.Loader.getRes(h)){var f=new t.AnimatorState;f.name=u,f.clip=m,p.speed&&(f.speed=p.speed),o.addState(f),0===c&&(this.getControllerLayer(n).defaultState=f)}}}void 0!==a&&(o.playOnWake=a);let e=i.avatarMask;if(e){let a=new t.AvatarMask;for(var g in o.avatarMask=a,e)a.setTransformActive(g,e[g])}}var y=e.cullingMode;void 0!==y&&(this.cullingMode=y)}),t.BaseCamera&&function(){let e=t.BaseCamera.prototype._parse;t.BaseCamera.prototype._parse=function(a,r){e.call(this,a,r),this.orthographic=a.orthographic,void 0!==a.orthographicVerticalSize&&(this.orthographicVerticalSize=a.orthographicVerticalSize),void 0!==a.fieldOfView&&(this.fieldOfView=a.fieldOfView),this.nearPlane=a.nearPlane,this.farPlane=a.farPlane;var n=a.clearColor;this.clearColor=new t.Color(n[0],n[1],n[2],n[3])}}(),t.Camera&&function(){let e=t.Camera.prototype._parse;t.Camera.prototype._parse=function(a,r){e.call(this,a,r);var n=a.clearFlag;void 0!==n&&(this.clearFlag=n);var i=a.viewport;this.normalizedViewport=new t.Viewport(i[0],i[1],i[2],i[3]);var o=a.enableHDR;void 0!==o&&(this.enableHDR=o)}}();class a{static _createSprite3DInstance(e,r,n){let i,o;switch(e.type){case"Scene3D":i=new t.Scene3D;break;case"Sprite3D":i=new t.Sprite3D;break;case"MeshSprite3D":i=new t.MeshSprite3D,n&&e.props.isStatic&&n.push(i);break;case"SkinnedMeshSprite3D":i=new t.SkinnedMeshSprite3D;break;case"SimpleSkinnedMeshSprite3D":i=new t.SimpleSkinnedMeshSprite3D;break;case"ShuriKenParticle3D":i=new t.ShuriKenParticle3D;break;case"Camera":i=new t.Camera;break;case"ReflectionProbe":i=new t.Sprite3D,o=i.addComponent(t.ReflectionProbe);break;case"DirectionLight":i=new t.Sprite3D,o=i.addComponent(t.DirectionLightCom);break;case"PointLight":i=new t.Sprite3D,o=i.addComponent(t.PointLightCom);break;case"SpotLight":i=new t.Sprite3D,o=i.addComponent(t.SpotLightCom);break;case"TrailSprite3D":i=new t.Sprite3D,o=i.addComponent(t.TrailRenderer);break;default:throw new Error(`unknown node type ${e.type}`)}let s=e.child;if(s)for(let e=0,t=s.length;e<t;e++){let t=a._createSprite3DInstance(s[e],r,n);i.addChild(t)}return r[e.instanceID]=o||i,i}static _createComponentInstance(e,r,n){let i=r[e.instanceID];i._parse(e.props,r);let o=e.child;if(o)for(let e=0,t=o.length;e<t;e++)a._createComponentInstance(o[e],r,n);let s=e.components;if(s)for(let e=0,a=s.length;e<a;e++){let a=s[e],r=t.ClassUtils.getClass(a.type);if(r){(i instanceof t.Component?i.owner:i).addComponent(r)._parse(a,n)}else console.warn(`unknown component type: ${a.type}.`)}}static _createNodeByJson02(e,t){let r={},n={component:[],data:[]},i=a._createSprite3DInstance(e,r,t);return a._createComponentInstance(e,r,n),a._createInteractInstance(n,r),i}static _createInteractInstance(e,t){let a=e.component,r=e.data;for(let e=0,n=a.length;e<n;e++)a[e]._parseInteractive(r[e],t)}static parse(e){let t,r=e.data,n=[];switch(e.version){case"LAYAHIERARCHY:02":case"LAYASCENE3D:02":t=a._createNodeByJson02(r,n);break;default:t=a._createNodeByJson(r,n)}return t}static _createNodeByJson(e,r){let n,i;switch(e.type){case"Scene3D":n=new t.Scene3D;break;case"Sprite3D":n=new t.Sprite3D;break;case"MeshSprite3D":n=new t.MeshSprite3D,r&&e.props.isStatic&&r.push(n);break;case"SkinnedMeshSprite3D":n=new t.SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":n=new t.ShuriKenParticle3D;break;case"Camera":n=new t.Camera;break;case"DirectionLight":n=new t.Sprite3D,i=n.addComponent(t.DirectionLightCom);break;case"PointLight":n=new t.Sprite3D,i=n.addComponent(t.PointLightCom);break;case"SpotLight":n=new t.Sprite3D,i=n.addComponent(t.SpotLightCom);break;case"TrailSprite3D":n=new t.Sprite3D,i=n.addComponent(t.TrailRenderer);break;default:throw new Error(`unknown node type ${e.type}`)}let o=e.child;if(o)for(let e=0,t=o.length;e<t;e++){let t=a._createNodeByJson(o[e],r);n.addChild(t)}let s=e.components;if(s)for(let e=0,a=s.length;e<a;e++){let a=s[e],r=t.ClassUtils.getClass(a.type);if(r){n.addComponent(r)._parse(a)}else console.warn(`unknown component type: ${a.type}.`)}return i?i._parse(e.props):n._parse(e.props,null),n}static collectResourceLinks(e,a){let r={},n=[];function i(e,i,o,s){let l=r[e];return void 0===l&&(l=t.URL.join(a,e),n.push({url:l,type:i,constructParams:o,propertyParams:s}),r[e]=l),l}return function e(a){let r=a.props;switch(a.type){case"Scene3D":let e=r.lightmaps;if(e)for(let a=0,r=e.length;a<r;a++){let r=e[a];if(r.path)r.path=i(r.path,t.Loader.TEXTURE2D,r.constructParams,r.propertyParams);else{let e=r.color;e.path=i(e.path,t.Loader.TEXTURE2D,e.constructParams,e.propertyParams);let a=r.direction;a&&(a.path=i(a.path,t.Loader.TEXTURE2D,a.constructParams,a.propertyParams))}}let n=r.reflectionTexture;n&&(r.reflection=i(n,t.Loader.TEXTURECUBE));let o=r.reflection;if(o&&(r.reflection=i(o,t.Loader.TEXTURECUBE)),r.sky){let e=r.sky.material;e&&(e.path=i(e.path,t.Loader.MATERIAL))}break;case"Camera":let s=r.skyboxMaterial;s&&(s.path=i(s.path,t.Loader.MATERIAL));break;case"TrailSprite3D":case"MeshSprite3D":case"SkinnedMeshSprite3D":case"SimpleSkinnedMeshSprite3D":let l=r.meshPath;l&&(r.meshPath=i(l,t.Loader.MESH));let c=r.materials;if(c)for(let e=0,a=c.length;e<a;e++)c[e].path=i(c[e].path,t.Loader.MATERIAL);"SimpleSkinnedMeshSprite3D"==a.type&&r.animatorTexture&&(r.animatorTexture=i(r.animatorTexture,t.Loader.TEXTURE2D));break;case"ShuriKenParticle3D":if(r.main){let e=r.renderer.resources,a=e.mesh,n=e.material;a&&(e.mesh=i(a,t.Loader.MESH)),n&&(e.material=i(n,t.Loader.MATERIAL))}else{let e=r.meshPath;e&&(r.meshPath=i(e,t.Loader.MESH)),r.material.path=i(r.material.path,t.Loader.MATERIAL)}break;case"Terrain":i(r.dataPath,t.Loader.TERRAINRES);break;case"ReflectionProbe":let d=r.reflection;d&&(r.reflection=i(d,t.Loader.TEXTURECUBE))}let n=a.components;if(n)for(let e=0,a=n.length;e<a;e++){let a=n[e];switch(a.type){case"Animator":let e=a.clipPaths;if(e)for(let a=0,r=e.length;a<r;a++)e[a]=i(e[a],t.Loader.ANIMATIONCLIP);else{let e=a.layers;for(let a=0;a<e.length;a++){let r=e[a].states;for(let e=0,a=r.length;e<a;e++){let a=r[e].clipPath;a&&(r[e].clipPath=i(a,t.Loader.ANIMATIONCLIP))}}}break;case"PhysicsCollider":case"Rigidbody3D":case"CharacterController":let r=a.shapes;for(let e=0;e<r.length;e++){let a=r[e];if("MeshColliderShape"===a.type){let e=a.mesh;e&&(a.mesh=i(e,t.Loader.MESH))}}}}let o=a.child;if(o)for(let t=0,a=o.length;t<a;t++)e(o[t])}(e.data),n}}var r,n;t.HierarchyLoader.v2=a;class i{static parse(e,a){let r=null==a?void 0:a.root;if(!r){let a=t.LayaEnv.isPlaying&&e.props.runtime?e.props.runtime:e.type,n=t.ClassUtils.getClass(a);r="instance"==e.props.renderType?n.instance||(n.instance=new n):new n}return r&&r._viewCreated?r:i.createByData(r,e)}static getBindFun(e){let a=i._funMap;a||(a=i._funMap=new t.WeakObject);var r=i._funMap.get(e);if(null==r){var n='"'+e+'"',o="(function(data){if(data==null)return;with(data){try{\nreturn "+(n=n.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";r=window.Laya._runScript(o),i._funMap.set(e,r)}return r}static createByData(e,a){var r=s.create();if("_idMap"in(e=i.createComp(a,e,e,null,r))&&(e._idMap=r._idMap),a.animations){var n,o,l,c=[],d=a.animations,p=d.length;for(n=0;n<p;n++){switch(o=new t.FrameAnimation,l=d[n],o._setUp(r._idMap,l),e[l.name]=o,o._setControlNode(e),l.action){case 1:o.play(0,!1);break;case 2:o.play(0,!0)}c.push(o)}e._aniList=c}return e instanceof t.Scene&&e._width>0&&null==a.props.hitTestPrior&&!e.mouseThrough&&(e.hitTestPrior=!0),r.finish(),e._setBit(t.NodeFlags.NOT_READY,!1),e.parent&&e.parent.activeInHierarchy&&e.active&&e._processActive(!0),e}static createInitTool(){return s.create()}static createComp(e,a=null,n=null,o=null,s=null){if(!(a=a||i.getCompInstance(e)))return e.props&&e.props.runtime?console.warn("runtime not found:"+e.props.runtime):console.warn("can not create:"+e.type),null;var l=e.child;if(l)for(var c=a instanceof(r||(r=t.ClassUtils.getClass("List"))),d=0,p=l.length;d<p;d++){var h=l[d];if(!("itemRender"in a)||"render"!=h.props.name&&"render"!==h.props.renderType)if("Graphic"==h.type)this._addGraphicsToSprite(h,a);else if(this._isDrawType(h.type))this._addGraphicToSprite(h,a,!0);else{if(c){var m=[],u=i.createComp(h,null,n,m,s);m.length&&(u._$bindData=m)}else u=i.createComp(h,null,n,o,s);"Script"==h.type?u instanceof t.Component?a.addComponentInstance(u):"owner"in u?u.owner=a:"target"in u&&(u.target=a):"mask"==h.props.renderType||"mask"==h.props.name?a.mask=u:u instanceof t.Node&&a.addChild(u)}else a.itemRender=h}var f=e.props;for(var g in f){var y=f[g];"string"==typeof y&&(y.indexOf("@node:")>=0||y.indexOf("@Prefab:")>=0)?s&&s.addNodeRef(a,g,y):i.setCompValue(a,g,y,n,o)}return a._afterInited&&a._afterInited(),e.compId&&s&&s._idMap&&(s._idMap[e.compId]=a),a}static setCompValue(e,a,r,n=null,s=null){if("string"==typeof r&&r.indexOf("${")>-1){if(i._sheet||(i._sheet=t.ClassUtils.getClass("laya.data.Table")),!i._sheet)return void console.warn("Can not find class Sheet");if(s)s.push(e,a,r);else if(n){-1==r.indexOf("].")&&(r=r.replace(".","[0]."));var l,c,d=new o(e,a,r);d.exe(n);for(var p=r.replace(/\[.*?\]\./g,".");null!=(l=i._parseWatchData.exec(p));){for(var h=l[1];null!=(c=i._parseKeyWord.exec(h));){var m=c[0],u=n._watchMap[m]||(n._watchMap[m]=[]);u.push(d),i._sheet.I.notifer.on(m,n,n.changeData,[m])}(u=n._watchMap[h]||(n._watchMap[h]=[])).push(d),i._sheet.I.notifer.on(h,n,n.changeData,[h])}}}else"var"===a&&n?n[r]=e:e[a]="true"===r||"false"!==r&&r}static getCompInstance(e){if("UIView"==e.type&&e.props&&e.props.pageData)return i.createByData(null,e.props.pageData);var a=t.LayaEnv.isPlaying&&e.props&&e.props.runtime||e.type,r=t.ClassUtils.getClass(a);if(!r)throw"Can not find class "+a;if("Script"===e.type&&r.prototype._doAwake){var o=t.Pool.createByClass(r);return o._destroyed=!1,o}if(e.props&&"renderType"in e.props&&"instance"==e.props.renderType)return r.instance||(r.instance=new r),r.instance;let s=new r;return s instanceof(n||(n=t.ClassUtils.getClass("View")))&&(s._scene=s),s}static collectResourceLinks(e){let t=new Set,a=[];function r(e){t.has(e)||(t.add(e),a.push(e))}if(e.loadList)for(let t of e.loadList)r(t);if(e.loadList3D)for(let t of e.loadList3D)r(t);return function e(t){let a=t.props;for(let e in a){let t=a[e];if("string"==typeof t&&t.indexOf("@Prefab:")>=0){r(t.replace("@Prefab:",""))}}let n=t.child;if(n)for(let t=0,a=n.length;t<a;t++){e(n[t])}}(e),a}static createByJson(e,a=null,r=null,n=null,i=null){"string"==typeof e&&(e=JSON.parse(e));var o=e.props;if(!a&&!(a=i?i.runWith(e):t.ClassUtils.getInstance(t.LayaEnv.isPlaying&&o.runtime||e.type)))return null;var s=e.child;if(s)for(var l=0,c=s.length;l<c;l++){var d=s[l];if("render"!==d.props.name&&"render"!==d.props.renderType||!a._$set_itemRender)if("Graphic"==d.type)this._addGraphicsToSprite(d,a);else if(this._isDrawType(d.type))this._addGraphicToSprite(d,a,!0);else{var p=this.createByJson(d,null,r,n,i);"Script"===d.type?"owner"in p?p.owner=a:"target"in p&&(p.target=a):"mask"==d.props.renderType?a.mask=p:a.addChild(p)}else a.itemRender=d}if(o)for(var h in o){var m=o[h];"var"===h&&r?r[m]=a:m instanceof Array&&a[h]instanceof Function?a[h].apply(a,m):a[h]=m}return n&&e.customProps&&n.runWith([a,e]),a.created&&a.created(),a}static _addGraphicsToSprite(e,t){var a=e.child;if(a&&!(a.length<1)){var r,n,i=this._getGraphicsFromSprite(e,t),o=0,s=0;for(e.props&&(o=this._getObjVar(e.props,"x",0),s=this._getObjVar(e.props,"y",0)),0!=o&&0!=s&&i.translate(o,s),n=a.length,r=0;r<n;r++)this._addGraphicToGraphics(a[r],i);0!=o&&0!=s&&i.translate(-o,-s)}}static _addGraphicToSprite(e,t,a=!1){var r=a?this._getGraphicsFromSprite(e,t):t.graphics;this._addGraphicToGraphics(e,r)}static _getGraphicsFromSprite(e,a){if(!e||!e.props)return a.graphics;var r=e.props.renderType;if("hit"===r||"unHit"===r){var n=a._style.hitArea||(a.hitArea=new t.HitArea);n[r]||(n[r]=new t.Graphics);var i=n[r]}return i||(i=a.graphics),i}static _getTransformData(e){var a;("pivotX"in e||"pivotY"in e)&&(a=a||new t.Matrix).translate(-this._getObjVar(e,"pivotX",0),-this._getObjVar(e,"pivotY",0));var r=this._getObjVar(e,"scaleX",1),n=this._getObjVar(e,"scaleY",1),i=this._getObjVar(e,"rotation",0);return this._getObjVar(e,"skewX",0),this._getObjVar(e,"skewY",0),1==r&&1==n&&0==i||((a=a||new t.Matrix).scale(r,n),a.rotate(.0174532922222222*i)),a}static _addGraphicToGraphics(e,t){var a,r;if((a=e.props)&&(r=this.DrawTypeDic[e.type])){var n=t,i=this._getParams(a,r[1],r[2],r[3]),o=this._tM;(o||1!=this._alpha)&&(n.save(),o&&n.transform(o),1!=this._alpha&&n.alpha(this._alpha)),n[r[0]].apply(n,i),(o||1!=this._alpha)&&n.restore()}}static _adptLineData(e){return e[2]=parseFloat(e[0])+parseFloat(e[2]),e[3]=parseFloat(e[1])+parseFloat(e[3]),e}static _adptTextureData(e){return e[0]=t.ILaya.Loader.getRes(e[0]),e}static _adptLinesData(e){return e[2]=this._getPointListByStr(e[2]),e}static _isDrawType(e){return"Image"!==e&&e in this.DrawTypeDic}static _getParams(e,t,a=0,r=null){var n,i,o,s=this._temParam;for(s.length=t.length,i=t.length,n=0;n<i;n++)s[n]=this._getObjVar(e,t[n][0],t[n][1]);return this._alpha=this._getObjVar(e,"alpha",1),(o=this._getTransformData(e))?(a||(a=0),o.translate(s[a],s[a+1]),s[a]=s[a+1]=0,this._tM=o):this._tM=null,r&&this[r]&&(s=this[r](s)),s}static _getPointListByStr(e){var t,a,r=e.split(",");for(a=r.length,t=0;t<a;t++)r[t]=parseFloat(r[t]);return r}static _getObjVar(e,t,a){return t in e?e[t]:a}}i._parseWatchData=/\${(.*?)}/g,i._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g,i.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]},i._temParam=[];class o{constructor(e,t,a){this.comp=e,this.prop=t,this.value=a}exe(e){var t=i.getBindFun(this.value);this.comp[this.prop]=t.call(this,e)}}class s{reset(){this._nodeRefList=null,this._initList=null,this._idMap=null}recover(){this.reset(),t.Pool.recover("InitTool",this)}static create(){var e=t.Pool.getItemByClass("InitTool",s);return e._idMap={},e}addNodeRef(e,t,a){this._nodeRefList||(this._nodeRefList=[]),this._nodeRefList.push([e,t,a])}setNodeRef(){if(this._nodeRefList)if(this._idMap){var e,t,a;for(t=this._nodeRefList.length,e=0;e<t;e++)(a=this._nodeRefList[e])[0][a[1]]=this.getReferData(a[2]);this._nodeRefList=null}else this._nodeRefList=null}getReferData(e){if(e.indexOf("@Prefab:")>=0)return new t.PrefabImpl(i,t.Loader.getRes(e.replace("@Prefab:","")),2);if(e.indexOf("@arr:")>=0){var a,r,n,o;n=(a=(e=e.replace("@arr:","")).split(",")).length;var s=[];for(r=0;r<n;r++)(o=a[r])?s.push(this._idMap[o.replace("@node:","")]):s.push(null);return s}return this._idMap[e.replace("@node:","")]}addInitItem(e){this._initList||(this._initList=[]),this._initList.push(e)}doInits(){this._initList&&(this._initList=null)}finish(){this.setNodeRef(),this.doInits(),this.recover()}}function l(e,a){if(1===a.length){var r=function(e){var a;switch(e.type){case"BoxColliderShape":var r=e.size;a=r?new t.BoxColliderShape(r[0],r[1],r[2]):new t.BoxColliderShape;break;case"SphereColliderShape":a=new t.SphereColliderShape(e.radius);break;case"CapsuleColliderShape":a=new t.CapsuleColliderShape(e.radius,e.height,e.orientation);break;case"MeshColliderShape":a=new t.MeshColliderShape;break;case"ConeColliderShape":a=new t.ConeColliderShape(e.radius,e.height,e.orientation);break;case"CylinderColliderShape":a=new t.CylinderColliderShape(e.radius,e.height,e.orientation);break;default:console.error("unknown shape type.")}return a}(a[0]);e.colliderShape=r}}function c(e){const a=Math.PI/180;var r,n,i,o=this.particleRenderer,s=e.material;s&&(i=t.Loader.getRes(s.path)),o.sharedMaterial=i;var l=e.meshPath;l&&(o.mesh=t.Loader.getRes(l)),o.renderMode=e.renderMode,o.stretchedBillboardCameraSpeedScale=e.stretchedBillboardCameraSpeedScale,o.stretchedBillboardSpeedScale=e.stretchedBillboardSpeedScale,o.stretchedBillboardLengthScale=e.stretchedBillboardLengthScale,o.sortingFudge=e.sortingFudge?e.sortingFudge:0;var c=this.particleSystem;c.isPerformanceMode=e.isPerformanceMode,c.duration=e.duration,c.looping=e.looping,c.prewarm=e.prewarm,c.startDelayType=e.startDelayType,c.startDelay=e.startDelay,c.startDelayMin=e.startDelayMin,c.startDelayMax=e.startDelayMax,c.startLifetimeType=e.startLifetimeType,c.startLifetimeConstant=e.startLifetimeConstant,c.startLifeTimeGradient=h(e.startLifetimeGradient),c.startLifetimeConstantMin=e.startLifetimeConstantMin,c.startLifetimeConstantMax=e.startLifetimeConstantMax,c.startLifeTimeGradientMin=h(e.startLifetimeGradientMin),c.startLifeTimeGradientMax=h(e.startLifetimeGradientMax),c.startSpeedType=e.startSpeedType,c.startSpeedConstant=e.startSpeedConstant,c.startSpeedConstantMin=e.startSpeedConstantMin,c.startSpeedConstantMax=e.startSpeedConstantMax,c.threeDStartSize=e.threeDStartSize,c.startSizeType=e.startSizeType,c.startSizeConstant=e.startSizeConstant;var g=e.startSizeConstantSeparate,y=c.startSizeConstantSeparate;y.x=g[0],y.y=g[1],y.z=g[2],c.startSizeConstantMin=e.startSizeConstantMin,c.startSizeConstantMax=e.startSizeConstantMax;var v=e.startSizeConstantMinSeparate,S=c.startSizeConstantMinSeparate;S.x=v[0],S.y=v[1],S.z=v[2];var w=e.startSizeConstantMaxSeparate,C=c.startSizeConstantMaxSeparate;C.x=w[0],C.y=w[1],C.z=w[2],c.threeDStartRotation=e.threeDStartRotation,c.startRotationType=e.startRotationType,c.startRotationConstant=e.startRotationConstant*a;var M=e.startRotationConstantSeparate,b=c.startRotationConstantSeparate;b.x=M[0]*a,b.y=M[1]*a,b.z=M[2]*a,c.startRotationConstantMin=e.startRotationConstantMin*a,c.startRotationConstantMax=e.startRotationConstantMax*a;var _=e.startRotationConstantMinSeparate,T=c.startRotationConstantMinSeparate;T.x=_[0]*a,T.y=_[1]*a,T.z=_[2]*a;var x=e.startRotationConstantMaxSeparate,L=c.startRotationConstantMaxSeparate;L.x=x[0]*a,L.y=x[1]*a,L.z=x[2]*a,c.randomizeRotationDirection=e.randomizeRotationDirection,c.startColorType=e.startColorType;var R=e.startColorConstant,D=c.startColorConstant;D.x=R[0],D.y=R[1],D.z=R[2],D.w=R[3];var k=e.startColorConstantMin,B=c.startColorConstantMin;B.x=k[0],B.y=k[1],B.z=k[2],B.w=k[3];var G=e.startColorConstantMax,V=c.startColorConstantMax;V.x=G[0],V.y=G[1],V.z=G[2],V.w=G[3],c.gravityModifier=e.gravityModifier,c.simulationSpace=e.simulationSpace,void 0!==e.simulationSpeed&&(c.simulationSpeed=e.simulationSpeed),c.scaleMode=e.scaleMode,c.playOnAwake=e.playOnAwake,c.maxParticles=e.maxParticles;var A=e.autoRandomSeed;null!=A&&(c.autoRandomSeed=A);var P=e.randomSeed;null!=P&&(c.randomSeed[0]=P);var O=e.emission,I=c.emission;if(O){I.emissionRate=O.emissionRate;var F=O.bursts;if(F)for(r=0,n=F.length;r<n;r++){var z=F[r];I.addBurst(new t.Burst(z.time,z.min,z.max))}I.enable=O.enable}else I.enable=!1;var E=e.shape;if(E){var N;switch(E.shapeType){case 0:var X;N=X=new t.SphereShape,X.radius=E.sphereRadius,X.emitFromShell=E.sphereEmitFromShell,X.randomDirection=E.sphereRandomDirection;break;case 1:var Y;N=Y=new t.HemisphereShape,Y.radius=E.hemiSphereRadius,Y.emitFromShell=E.hemiSphereEmitFromShell,Y.randomDirection=E.hemiSphereRandomDirection;break;case 2:var U;N=U=new t.ConeShape,U.angle=E.coneAngle*a,U.radius=E.coneRadius,U.length=E.coneLength,U.emitType=E.coneEmitType,U.randomDirection=E.coneRandomDirection;break;case 3:var W;N=W=new t.BoxShape,W.x=E.boxX,W.y=E.boxY,W.z=E.boxZ,W.randomDirection=E.boxRandomDirection;break;case 7:var Z;N=Z=new t.CircleShape,Z.radius=E.circleRadius,Z.arc=E.circleArc*a,Z.emitFromEdge=E.circleEmitFromEdge,Z.randomDirection=E.circleRandomDirection;break;default:var K;N=K=new t.CircleShape,K.radius=E.circleRadius,K.arc=E.circleArc*a,K.emitFromEdge=E.circleEmitFromEdge,K.randomDirection=E.circleRandomDirection}N.enable=E.enable,c.shape=N}var H=e.velocityOverLifetime;if(H){var j,$=H.velocity;switch($.type){case 0:var J=$.constant;j=t.GradientVelocity.createByConstant(new t.Vector3(J[0],J[1],J[2]));break;case 1:j=t.GradientVelocity.createByGradient(m($.gradientX),m($.gradientY),m($.gradientZ));break;case 2:var q=$.constantMin,Q=$.constantMax;j=t.GradientVelocity.createByRandomTwoConstant(new t.Vector3(q[0],q[1],q[2]),new t.Vector3(Q[0],Q[1],Q[2]));break;case 3:j=t.GradientVelocity.createByRandomTwoGradient(m($.gradientXMin),m($.gradientXMax),m($.gradientYMin),m($.gradientYMax),m($.gradientZMin),m($.gradientZMax))}var ee=new t.VelocityOverLifetime(j);ee.space=H.space,ee.enable=H.enable,c.velocityOverLifetime=ee}var te=e.colorOverLifetime;if(te){var ae,re=te.color;switch(re.type){case 0:var ne=re.constant;ae=t.GradientColor.createByConstant(new t.Vector4(ne[0],ne[1],ne[2],ne[3]));break;case 1:ae=t.GradientColor.createByGradient(d(re.gradient));break;case 2:var ie=re.constantMin,oe=re.constantMax;ae=t.GradientColor.createByRandomTwoConstant(new t.Vector4(ie[0],ie[1],ie[2],ie[3]),new t.Vector4(oe[0],oe[1],oe[2],oe[3]));break;case 3:ae=t.GradientColor.createByRandomTwoGradient(d(re.gradientMin),d(re.gradientMax))}var se=new t.ColorOverLifetime(ae);se.enable=te.enable,c.colorOverLifetime=se}var le=e.sizeOverLifetime;if(le){var ce,de=le.size;switch(de.type){case 0:ce=de.separateAxes?t.GradientSize.createByGradientSeparate(u(de.gradientX),u(de.gradientY),u(de.gradientZ)):t.GradientSize.createByGradient(u(de.gradient));break;case 1:if(de.separateAxes){var pe=de.constantMinSeparate,he=de.constantMaxSeparate;ce=t.GradientSize.createByRandomTwoConstantSeparate(new t.Vector3(pe[0],pe[1],pe[2]),new t.Vector3(he[0],he[1],he[2]))}else ce=t.GradientSize.createByRandomTwoConstant(de.constantMin,de.constantMax);break;case 2:ce=de.separateAxes?t.GradientSize.createByRandomTwoGradientSeparate(u(de.gradientXMin),u(de.gradientYMin),u(de.gradientZMin),u(de.gradientXMax),u(de.gradientYMax),u(de.gradientZMax)):t.GradientSize.createByRandomTwoGradient(u(de.gradientMin),u(de.gradientMax))}var me=new t.SizeOverLifetime(ce);me.enable=le.enable,c.sizeOverLifetime=me}var ue=e.rotationOverLifetime;if(ue){var fe,ge=ue.angularVelocity;switch(ge.type){case 0:if(ge.separateAxes){var ye=ge.constantSeparate;fe=t.GradientAngularVelocity.createByConstantSeparate(new t.Vector3(ye[0]*a,ye[1]*a,ye[2]*a))}else fe=t.GradientAngularVelocity.createByConstant(ge.constant*a);break;case 1:fe=ge.separateAxes?t.GradientAngularVelocity.createByGradientSeparate(f(ge.gradientX),f(ge.gradientY),f(ge.gradientZ)):t.GradientAngularVelocity.createByGradient(f(ge.gradient));break;case 2:if(ge.separateAxes){var ve=ge.constantMinSeparate,Se=ge.constantMaxSeparate;fe=t.GradientAngularVelocity.createByRandomTwoConstantSeparate(new t.Vector3(ve[0]*a,ve[1]*a,ve[2]*a),new t.Vector3(Se[0]*a,Se[1]*a,Se[2]*a))}else fe=t.GradientAngularVelocity.createByRandomTwoConstant(ge.constantMin*a,ge.constantMax*a);break;case 3:ge.separateAxes||(fe=t.GradientAngularVelocity.createByRandomTwoGradient(f(ge.gradientMin),f(ge.gradientMax)))}var we=new t.RotationOverLifetime(fe);we.enable=ue.enable,c.rotationOverLifetime=we}var Ce=e.textureSheetAnimation;if(Ce){var Me,be=Ce.frame;switch(be.type){case 0:Me=t.FrameOverTime.createByConstant(be.constant);break;case 1:Me=t.FrameOverTime.createByOverTime(p(be.overTime));break;case 2:Me=t.FrameOverTime.createByRandomTwoConstant(be.constantMin,be.constantMax);break;case 3:Me=t.FrameOverTime.createByRandomTwoOverTime(p(be.overTimeMin),p(be.overTimeMax))}var _e,Te=Ce.startFrame;switch(Te.type){case 0:_e=t.StartFrame.createByConstant(Te.constant);break;case 1:_e=t.StartFrame.createByRandomTwoConstant(Te.constantMin,Te.constantMax)}var xe=new t.TextureSheetAnimation(Me,_e);xe.enable=Ce.enable;var Le=Ce.tiles;xe.tiles=new t.Vector2(Le[0],Le[1]),xe.type=Ce.type,xe.randomRow=Ce.randomRow;var Re=Ce.rowIndex;void 0!==Re&&(xe.rowIndex=Re),xe.cycles=Ce.cycles,c.textureSheetAnimation=xe}}function d(e,a=4){var r=new t.Gradient;if(e){var n,i,o=e.alphas;if(o)for(n=0,i=o.length;n<i;n++){n==a-1&&i>a&&(n=i-1,console.warn(`GradientDataColor warning:alpha data length is large than ${a}, will ignore the middle data.`));var s=o[n];r.addColorAlpha(s.key,s.value)}else r.addColorAlpha(0,1),r.addColorAlpha(1,1);var l=e.rgbs;if(l)for(n=0,i=l.length;n<i;n++){n==a-1&&i>a&&(n=i-1,console.warn(`GradientDataColor warning:rgb data length is large than ${a}, will ignore the middle data.`));var c=l[n],d=c.value;r.addColorRGB(c.key,new t.Color(d[0],d[1],d[2],1))}else r.addColorRGB(0,new t.Color(1,1,1,1)),r.addColorRGB(1,new t.Color(1,1,1,1))}else r.addColorAlpha(0,1),r.addColorAlpha(1,1),r.addColorRGB(0,new t.Color(1,1,1,1)),r.addColorRGB(1,new t.Color(1,1,1,1));return r}function p(e){var a=new t.GradientDataInt;if(e)for(var r=e.frames,n=0,i=r.length;n<i;n++){var o=r[n];a.add(o.key,o.value)}else a.add(0,0),a.add(1,1);return a}function h(e){for(var a=new t.GradientDataNumber,r=e.startLifetimes,n=0,i=r.length;n<i;n++){var o=r[n];a.add(o.key,o.value)}return a}function m(e){for(var a=new t.GradientDataNumber,r=e.velocitys,n=0,i=r.length;n<i;n++){var o=r[n];a.add(o.key,o.value)}return a}function u(e){var a=new t.GradientDataNumber;if(e)for(var r=e.sizes,n=0,i=r.length;n<i;n++){var o=r[n];a.add(o.key,o.value)}else a.add(0,0),a.add(1,1);return a}function f(e){for(var a=new t.GradientDataNumber,r=e.angularVelocitys,n=0,i=r.length;n<i;n++){var o=r[n];a.add(o.key,o.value/180*Math.PI)}return a}function g(e,a){for(var r in a)switch(r){case"bases":var n=a.bases;for(var i in n)e[i]=n[i];break;case"vector2s":var o=a.vector2s;for(var i in o){var s=e[i],l=o[i];s.setValue(l[0],l[1]),e[i]=s}break;case"vector3s":var c=a.vector3s;for(var i in c){var d=e[i],p=c[i];d.setValue(p[0],p[1],p[2]),e[i]=d}break;case"vector4s":var h=a.vector4s;for(var i in h){var m=e[i],u=h[i];m.setValue(u[0],u[1],u[2],u[3]),e[i]=m}break;case"gradientDataNumbers":var f=a.gradientDataNumbers;for(var i in f){for(var g=e[i],y=a[i],v=0,S=y.length;v<S;v++){var w=y[v];g.add(w.key,w.value)}e[i]=g}break;case"resources":var C=a.resources;for(var i in C){let a=t.Loader.getRes(C[i]);a&&a instanceof t.Texture&&(a=a.bitmap),e[i]=a}break;case"bursts":var M=a.bursts;for(v=0,S=M.length;v<S;v++){var b=M[v];e.addBurst(new t.Burst(b.time,b.min,b.max))}break;case"randomSeed":e.randomSeed[0]=a.randomSeed;break;case"shapeType":case"type":case"color":case"size":case"frame":case"startFrame":case"angularVelocity":case"velocity":break;default:throw"ShurikenParticle3D:unknown type."}}t.HierarchyLoader.legacySceneOrPrefab=i,t.Light&&function(){let e=t.Light.prototype._parse;t.Light.prototype._parse=function(t,a){e.call(this,t,a);var r=t.color;this.color.r=r[0],this.color.g=r[1],this.color.b=r[2],this.intensity=t.intensity,this.lightmapBakedType=t.lightmapBakedType}}(),t.LightSprite&&function(){let e=t.LightSprite.prototype._parse;t.LightSprite.prototype._parse=function(t,a){e.call(this,t,a);var r=t.color;this.color.r=r[0],this.color.g=r[1],this.color.b=r[2],this.intensity=t.intensity,this.lightmapBakedType=t.lightmapBakedType}}(),t.MeshSprite3D&&function(){let e=t.MeshSprite3D.prototype._parse;t.MeshSprite3D.prototype._parse=function(a,r){e.call(this,a,r);var n=this.meshRenderer,i=a.lightmapIndex;null!=i&&(n.lightmapIndex=i);var o=a.lightmapScaleOffset;o&&(n.lightmapScaleOffset=new t.Vector4(o[0],o[1],o[2],o[3])),null!=a.meshPath&&(this.meshFilter.sharedMesh=t.Loader.getRes(a.meshPath)),null!=a.enableRender&&(n._enabled=a.enableRender),null!=a.receiveShadows&&(n.receiveShadow=a.receiveShadows),null!=a.castShadow&&(n.castShadow=a.castShadow);var s=a.materials;if(s){var l=n.sharedMaterials,c=s.length;l.length=c;for(var d=0;d<c;d++)l[d]=t.Loader.getRes(s[d].path);n.sharedMaterials=l}}}(),t.PhysicsColliderComponent&&function(){t.PhysicsColliderComponent.prototype._parse=function(e,t){null!=e.collisionGroup&&this._collider.setCollisionGroup(e.collisionGroup),null!=e.canCollideWith&&this._collider.setCanCollideWith(e.canCollideWith)};let e=t.PhysicsCollider.prototype._parse;t.PhysicsCollider.prototype._parse=function(t,a){null!=t.friction&&(this.friction=t.friction),null!=t.rollingFriction&&(this.rollingFriction=t.rollingFriction),null!=t.restitution&&(this.restitution=t.restitution),null!=t.isTrigger&&(this.isTrigger=t.isTrigger),e.call(this,t,a),l(this,t.shapes)};let a=t.Rigidbody3D.prototype._parse;t.Rigidbody3D.prototype._parse=function(e,t){if(null!=e.friction&&(this.friction=e.friction),null!=e.rollingFriction&&(this.rollingFriction=e.rollingFriction),null!=e.restitution&&(this.restitution=e.restitution),null!=e.mass&&(this.mass=e.mass),null!=e.linearDamping&&(this.linearDamping=e.linearDamping),null!=e.angularDamping&&(this.angularDamping=e.angularDamping),null!=e.linearFactor){var r=this.linearFactor;r.fromArray(e.linearFactor),this.linearFactor=r}if(null!=e.angularFactor){var n=this.angularFactor;n.fromArray(e.angularFactor),this.angularFactor=n}e.gravity&&(this.gravity.fromArray(e.gravity),this.gravity=this.gravity),a.call(this,e,t),l(this,e.shapes),null!=e.isKinematic&&(this.isKinematic=e.isKinematic)}}(),t.PointLightCom&&function(){let e=t.PointLightCom.prototype._parse;t.PointLightCom.prototype._parse=function(t,a){e.call(this,t,a),this.range=t.range}}(),t.ShuriKenParticle3D&&function(){let e=t.ShuriKenParticle3D.prototype._parse;t.ShuriKenParticle3D.prototype._parse=function(a,r){if(e.call(this,a,r),a.main){var n=this.particleSystem;g(this.particleRenderer,a.renderer),g(n,a.main),g(n.emission,a.emission);var i=a.shape;if(i){var o;switch(i.shapeType){case 0:o=new t.SphereShape;break;case 1:o=new t.HemisphereShape;break;case 2:o=new t.ConeShape;break;case 3:o=new t.BoxShape;break;case 7:o=new t.CircleShape;break;default:throw"ShuriKenParticle3D:unknown shape type."}g(o,i),n.shape=o}var s=a.velocityOverLifetime;if(s){var l,h=s.velocity;switch(h.type){case 0:var y=h.constant;l=t.GradientVelocity.createByConstant(y?new t.Vector3(y[0],y[1],y[2]):new t.Vector3(0,0,0));break;case 1:l=t.GradientVelocity.createByGradient(m(h.gradientX),m(h.gradientY),m(h.gradientZ));break;case 2:var v=h.constantMin,S=h.constantMax;l=t.GradientVelocity.createByRandomTwoConstant(v?new t.Vector3(v[0],v[1],v[2]):new t.Vector3(0,0,0),S?new t.Vector3(S[0],S[1],S[2]):new t.Vector3(0,0,0));break;case 3:l=t.GradientVelocity.createByRandomTwoGradient(m(h.gradientXMin),m(h.gradientXMax),m(h.gradientYMin),m(h.gradientYMax),m(h.gradientZMin),m(h.gradientZMax))}var w=new t.VelocityOverLifetime(l);g(w,s),n.velocityOverLifetime=w}var C=a.colorOverLifetime;if(C){var M=C.color;let e=M.maxKeyCount;var b;switch(M.type){case 0:var _=M.constant;b=t.GradientColor.createByConstant(_?new t.Vector4(_[0],_[1],_[2],_[3]):new t.Vector4(0,0,0,0));break;case 1:b=t.GradientColor.createByGradient(d(M.gradient,e));break;case 2:var T=M.constantMin,x=M.constantMax;b=t.GradientColor.createByRandomTwoConstant(T?new t.Vector4(T[0],T[1],T[2],T[3]):new t.Vector4(0,0,0,0),T?new t.Vector4(x[0],x[1],x[2],x[3]):new t.Vector4(0,0,0,0));break;case 3:b=t.GradientColor.createByRandomTwoGradient(d(M.gradientMin,e),d(M.gradientMax,e))}var L=new t.ColorOverLifetime(b);g(L,C),n.colorOverLifetime=L}var R=a.sizeOverLifetime;if(R){var D,k=R.size;switch(k.type){case 0:D=k.separateAxes?t.GradientSize.createByGradientSeparate(u(k.gradientX),u(k.gradientY),u(k.gradientZ)):t.GradientSize.createByGradient(u(k.gradient));break;case 1:if(k.separateAxes){var B=k.constantMinSeparate,G=k.constantMaxSeparate;D=t.GradientSize.createByRandomTwoConstantSeparate(B?new t.Vector3(B[0],B[1],B[2]):new t.Vector3(0,0,0),G?new t.Vector3(G[0],G[1],G[2]):new t.Vector3(0,0,0))}else D=t.GradientSize.createByRandomTwoConstant(k.constantMin||0,k.constantMax||0);break;case 2:D=k.separateAxes?t.GradientSize.createByRandomTwoGradientSeparate(u(k.gradientXMin),u(k.gradientYMin),u(k.gradientZMin),u(k.gradientXMax),u(k.gradientYMax),u(k.gradientZMax)):t.GradientSize.createByRandomTwoGradient(u(k.gradientMin),u(k.gradientMax))}var V=new t.SizeOverLifetime(D);g(V,R),n.sizeOverLifetime=V}var A=a.rotationOverLifetime;if(A){var P,O=A.angularVelocity;switch(O.type){case 0:if(O.separateAxes){var I=O.constantSeparate;P=t.GradientAngularVelocity.createByConstantSeparate(I?new t.Vector3(I[0],I[1],I[2]):new t.Vector3(0,0,Math.PI/4))}else P=t.GradientAngularVelocity.createByConstant(O.constant||Math.PI/4);break;case 1:P=O.separateAxes?t.GradientAngularVelocity.createByGradientSeparate(f(O.gradientX),f(O.gradientY),f(O.gradientZ)):t.GradientAngularVelocity.createByGradient(f(O.gradient));break;case 2:if(O.separateAxes){var F=O.constantMinSeparate,z=O.constantMaxSeparate;P=t.GradientAngularVelocity.createByRandomTwoConstantSeparate(F?new t.Vector3(F[0],F[1],F[2]):new t.Vector3(0,0,0),z?new t.Vector3(z[0],z[1],z[2]):new t.Vector3(0,0,Math.PI/4))}else P=t.GradientAngularVelocity.createByRandomTwoConstant(O.constantMin||0,O.constantMax||Math.PI/4);break;case 3:O.separateAxes||(P=t.GradientAngularVelocity.createByRandomTwoGradient(f(O.gradientMin),f(O.gradientMax)))}var E=new t.RotationOverLifetime(P);g(E,A),n.rotationOverLifetime=E}var N=a.textureSheetAnimation;if(N){var X,Y=N.frame;switch(Y.type){case 0:X=t.FrameOverTime.createByConstant(Y.constant);break;case 1:X=t.FrameOverTime.createByOverTime(p(Y.overTime));break;case 2:X=t.FrameOverTime.createByRandomTwoConstant(Y.constantMin,Y.constantMax);break;case 3:X=t.FrameOverTime.createByRandomTwoOverTime(p(Y.overTimeMin),p(Y.overTimeMax))}var U,W=N.startFrame;switch(W.type){case 0:U=t.StartFrame.createByConstant(W.constant);break;case 1:U=t.StartFrame.createByRandomTwoConstant(W.constantMin,W.constantMax)}var Z=new t.TextureSheetAnimation(X,U);g(Z,N),n.textureSheetAnimation=Z}}else c.call(this,a)}}(),t.SimpleSkinnedMeshSprite3D&&function(){let e=t.SimpleSkinnedMeshSprite3D.prototype._parse;t.SimpleSkinnedMeshSprite3D.prototype._parse=function(a,r){e.call(this,a,r);var n=this.simpleSkinnedMeshRenderer,i=a.lightmapIndex;null!=i&&(n.lightmapIndex=i);var o=a.lightmapScaleOffset;o&&(n.lightmapScaleOffset=new t.Vector4(o[0],o[1],o[2],o[3])),null!=a.enableRender&&(n.enabled=a.enableRender),null!=a.receiveShadows&&(n.receiveShadow=a.receiveShadows),null!=a.castShadow&&(n.castShadow=a.castShadow);let s=a.meshPath;if(s){let e=t.Loader.getRes(s);e&&(this.meshFilter.sharedMesh=e)}var l=a.materials;if(l){let e=n.sharedMaterials,a=l.length;e.length=a;for(let r=0;r<a;r++)e[r]=t.Loader.getRes(l[r].path);n.sharedMaterials=e}var c=a.boundBox,d=c.min,p=c.max;if(n.localBounds.setMin(new t.Vector3(d[0],d[1],d[2])),n.localBounds.setMax(new t.Vector3(p[0],p[1],p[2])),n.localBounds=n.localBounds,r){let e=a.rootBone;n.rootBone=r[e];let t=a.bones;for(let e=0,a=t.length;e<a;e++)n.bones.push(r[t[e]]);n.bones=n.bones,n._bonesNums=a.bonesNums?a.bonesNums:n.bones.length}var h=a.animatorTexture;if(h){let e=t.Loader.getRes(h,t.Loader.TEXTURE2D);n.simpleAnimatorTexture=e}}}(),t.SkinnedMeshSprite3D&&function(){let e=t.SkinnedMeshSprite3D.prototype._parse;t.SkinnedMeshSprite3D.prototype._parse=function(a,r){e.call(this,a,r);var n=this.skinnedMeshRenderer,i=a.lightmapIndex;null!=i&&(n.lightmapIndex=i);var o,s=a.lightmapScaleOffset;if(s&&(n.lightmapScaleOffset=new t.Vector4(s[0],s[1],s[2],s[3])),null!=a.enableRender&&(n.enabled=a.enableRender),null!=a.receiveShadows&&(n.receiveShadow=a.receiveShadows),null!=a.castShadow&&(n.castShadow=a.castShadow),o=a.meshPath){var l=t.Loader.getRes(o);l&&(this.meshFilter.sharedMesh=l)}var c=a.materials;if(c){var d=n.sharedMaterials,p=c.length;d.length=p;for(var h=0;h<p;h++)d[h]=t.Loader.getRes(c[h].path);n.sharedMaterials=d}var m=a.boundBox,u=m.min,f=m.max;if(n.localBounds.setMin(new t.Vector3(u[0],u[1],u[2])),n.localBounds.setMax(new t.Vector3(f[0],f[1],f[2])),n.localBounds=n.localBounds,r){var g=a.rootBone;n.rootBone=r[g];var y,v=a.bones;for(h=0,y=v.length;h<y;h++)n.bones.push(r[v[h]]);n.bones=n.bones}}}(),t.SpotLightCom&&function(){let e=t.SpotLightCom.prototype._parse;t.SpotLightCom.prototype._parse=function(t,a){e.call(this,t,a),this.range=t.range,this.spotAngle=t.spotAngle}}(),t.Sprite3D&&(t.Sprite3D.prototype._parse=function(e,t){if(void 0!==e.isStatic&&(this.isStatic=e.isStatic),void 0!==e.active&&(this.active=e.active),null!=e.name&&(this.name=e.name),null!=e.tag&&(this.tag=e.tag),void 0!==e.position){var a=this.transform.localPosition;a.fromArray(e.position),this.transform.localPosition=a}if(void 0!==e.rotationEuler){var r=this.transform.localRotationEuler;r.fromArray(e.rotationEuler),this.transform.localRotationEuler=r}if(void 0!==e.rotation){var n=this.transform.localRotation;n.fromArray(e.rotation),this.transform.localRotation=n}if(void 0!==e.scale){var i=this.transform.localScale;i.fromArray(e.scale),this.transform.localScale=i}null!=e.layer&&(this.layer=e.layer)}),t.TrailRenderer&&(t.TrailRenderer.prototype._parse=function(e,a){var r,n,i=this._trailFilter,o=e.materials;if(o){var s=this.sharedMaterials,l=o.length;for(s.length=l,r=0;r<l;r++)s[r]=t.Loader.getRes(o[r].path);this.sharedMaterials=s}i.time=e.time,i.minVertexDistance=e.minVertexDistance,i.widthMultiplier=e.widthMultiplier,i.textureMode=e.textureMode,null!=e.alignment&&(i.alignment=e.alignment);var c=[],d=e.widthCurve;for(r=0,n=d.length;r<n;r++){var p=new t.FloatKeyframe;p.time=d[r].time,p.inTangent=d[r].inTangent,p.outTangent=d[r].outTangent,p.value=d[r].value,c.push(p)}i.widthCurve=c;var h=e.colorGradient,m=h.colorKeys,u=h.alphaKeys,f=new t.Gradient;for(f.mode=h.mode,r=0,n=m.length;r<n;r++){var g=m[r];f.addColorRGB(g.time,new t.Color(g.value[0],g.value[1],g.value[2],1))}for(r=0,n=u.length;r<n;r++){var y=u[r];f.addColorAlpha(y.time,y.value)}i.colorGradient=f}),e.HierarchyParserV2=a,e.LegacyUIParser=i}(window.Laya=window.Laya||{},Laya);